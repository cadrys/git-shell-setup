#!/bin/sh

#usage: setup [-q | --quiet]
#
# To setup env.

while true; do
	case "$1" in
		-h ) print-file-comments "$0"; exit ;;
		-q | --quiet)
			quiet=1; shift ;;
		* )
			break ;;
	esac
done

if [ -s "$HOME/ostype.gitconfig" ]; then
	[ ! $quiet ] && echo "file '~/ostype.gitconfig' is not empty, not overwriting"
	exit 0
fi

# .gitconfig per ostype
case "$OSTYPE" in
	linux*)
		ostype_gitconfig=".gitconfig.linux.gitconfig" ;;
	msys*)
		ostype_gitconfig=".gitconfig.windows.gitconfig" ;;
	darwin*)
		ostype_gitconfig=".gitconfig.mac.gitconfig" ;;
	*)
		echo 1>&2 "fatal: no gitconfig configured for ostype '$OSTYPE'"
		exit 1
esac

[ ! $quiet ] && echo "Using '$ostype_gitconfig'"
git config --file "$HOME/ostype.gitconfig" --add include.path "$ostype_gitconfig"
